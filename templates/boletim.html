{% extends "base.html" %}
{% block title %}Meu Boletim{% endblock %}
{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
        <h1>Meu Boletim</h1>
        <div class="export-buttons">
            <a href="{{ url_for('exportar_boletim', formato='pdf') }}" class="action-btn export-btn">
                <i class="fas fa-file-pdf" style="margin-right: 8px;"></i>Exportar PDF
            </a>
            <a href="{{ url_for('exportar_boletim', formato='excel') }}" class="action-btn export-btn">
                <i class="fas fa-file-excel" style="margin-right: 8px;"></i>Exportar Excel
            </a>
        </div>
    </div>
    <p>Aqui você pode ver seus resultados em todas as provas que você realizou.</p>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash-message {{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    {% if resultados %}
        <div class="table-responsive">
            <table class="table table-striped table-hover mt-3">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Prova</th>
                        <th>Curso</th>
                        <th>Pontuação</th>
                    </tr>
                </thead>
                <tbody>
                    {% for resultado in resultados %}
                    <tr>
                        <td>{{ resultado.data }}</td>
                        <td>{{ resultado.titulo_prova }}</td>
                        <td>{{ resultado.curso }}</td>
                        <td>{{ resultado.pontuacao }} / {{ resultado.total_questoes }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="no-data mt-3">Nenhum resultado de prova encontrado para você ainda.</p>
    {% endif %}
</div>
{% endblock %}