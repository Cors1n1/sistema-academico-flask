{% extends "base.html" %}
{% block title %}{{ 'Editar' if aula else 'Criar' }} Aula{% endblock %}
{% block head %}
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.js"></script>
{% endblock %}

{% block content %}
<div class="card">
    <h1>{{ 'Editar Aula' if aula else 'Criar Nova Aula' }}</h1>

    <form method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="form-group">
            <label for="titulo">Título da Aula:</label>
            <input type="text" id="titulo" name="titulo" required value="{{ aula.titulo if aula else '' }}">
        </div>
        <div class="form-group">
            <label for="curso">Associar ao Curso:</label>
            <select id="curso" name="curso">
                <option value="Lógica de Programação" {% if aula and aula.curso == 'Lógica de Programação' %}selected{% endif %}>Lógica de Programação</option>
                <option value="Linguagens de Programação" {% if aula and aula.curso == 'Linguagens de Programação' %}selected{% endif %}>Linguagens de Programação</option>
                <option value="Algorítimos e Estruturas de dados" {% if aula and aula.curso == 'Algorítimos e Estruturas de dados' %}selected{% endif %}>Algorítimos e Estruturas de dados</option>
            </select>
        </div>
        <div class="form-group">
            <label for="editor-conteudo">Conteúdo da Aula:</label>
            <textarea id="editor-conteudo" name="conteudo">{{ aula.conteudo | safe if aula else '' }}</textarea>
        </div>

        <hr style="border: 0; border-top: 1px solid var(--border-color); margin: 30px 0;">
        <button type="submit" class="action-btn save-btn">Salvar Aula</button>
        <a href="{{ url_for('gerenciar_aulas') }}" class="action-btn cancel-btn">Cancelar</a>
    </form>
</div>

<script>
    // Ativa o editor de texto
    $(document).ready(function() {
        $('#editor-conteudo').summernote({
            height: 300,
            toolbar: [
                ['style', ['style']], ['font', ['bold', 'italic', 'underline', 'clear']],
                ['para', ['ul', 'ol', 'paragraph']], ['insert', ['link', 'picture']],
                ['view', ['fullscreen', 'codeview']]
            ]
        });
    });
</script>
{% endblock %}